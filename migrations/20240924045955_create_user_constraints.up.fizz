add_index("users", "username", {})
add_index("users", "email", {})

sql("CREATE EXTENSION IF NOT EXISTS 'uuid-ossp';")
sql("alter table only users alter column user_id set default uuid_generate_v4();")
sql("alter table users add constraint username_check check(length(username) >= 8)")
sql("alter table users add constraint email_check check(email ~* '^[A-Za-z0-9._+%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$')")
sql("alter table users add constraint password_check check(password ~* '^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$')")
